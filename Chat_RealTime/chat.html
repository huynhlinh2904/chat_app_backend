<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!--[if IE]>
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->
    <title>GK-ERP H·ªá th·ªëng qu·∫£n tr·ªã doanh nghi·ªáp to√†n di·ªán </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Favicons -->

    <link rel="apple-touch-icon-precomposed" sizes="144x144"
        href="../../../assets/images/icons/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114"
        href="../../../assets/images/icons/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72"
        href="../../../assets/images/icons/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../../../assets/images/icons/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="../../../assets/images/icons/favicon.png">

    <link rel="stylesheet" href="../../common/css/Common.css">
    <link rel="stylesheet" href="../../../assets/widgets/jstree/style.min.css" />
    <link rel="stylesheet" href="../../../assets/widgets/summernote-wysiwyg/summernote-wysiwyg.css" />
    <link rel="stylesheet" href="chat.css" />
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/css/lightgallery-bundle.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/dist/tippy.css" />
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>

    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/emoji-mart@5.4.0/dist-modern/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/lightgallery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script>
    <!-- JS Core -->
    <script type="text/javascript" src="../../../assets/js-core/jquery-core.js"></script>
    <script type="text/javascript" src="../../../assets/js-core/jquery-ui-core.js"></script>
    <script type="text/javascript" src="../../../assets/widgets/summernote-wysiwyg/summernote-wysiwyg.js"></script>
    <script type="text/javascript" src="../../common/js/Common.js"></script>
    <script type="text/javascript" src="../../common/js/util_element.js"></script>
    <script type="text/javascript" src="../../common/js/util.js"></script>
    <!--Signal-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/5.0.11/signalr.min.js"></script>



    <script src="simple-tree-table/dist/jquery-simple-tree-table.js"></script>

    <!-- calender -->
    <script type="text/javascript" src="../../../assets/widgets/daterangepicker/moment.js"></script>
    <script type="text/javascript" src="../../../assets/widgets/calendar/calendar.js"></script>
    <script type="text/javascript" src="../../../assets/widgets/slimscroll/slimscroll.js"></script>

    <!-- select2.js -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="./js/signalR.js"></script>


</head>

<body>
    <div id="sb-site">
        <!-- SLIDER BAR LEFT -->
        <div class="sb-slidebar bg-black sb-left sb-style-overlay">
        </div>
        <!-- SLIDER BAR RIGHT -->
        <div class="sb-slidebar bg-black sb-right sb-style-overlay">
        </div>
        <div id="loading">
            <div class="spinner">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
            </div>
        </div>
        <div id="loadingcustom">
            <div class="loading-spinner">
                <i class="bg-blue"></i>
                <i class="bg-blue"></i>
                <i class="bg-blue"></i>
                <i class="bg-blue"></i>
                <i class="bg-blue"></i>
                <i class="bg-blue"></i>
            </div>
            <div id="loading-text" class="loading-text">Loading...</div>
        </div>
        <div id="page-wrapper">
            <!-- TOPBAR -->
            <div id="page-header" class="bg-gradient-9">
            </div>
            <!-- SLIDER BAR-->
            <div id="page-sidebar">
            </div>
            <!-- PAGE CONTENT-->
            <div id="page-content-wrapper">
                <div id="page-content">
                    <div class="container">
                        <!--L·∫•y danh s√°ch nh√¢n vi√™n-->
                        <div class="cv-wrapper main-CV" id="cv-container">
                            <div id="leftPane" class="cv-panel pane">
                                <h2 style="margin-bottom: 20px;">ƒêo·∫°n chat</h2>
                                <div class="searchBar">
                                    <div class="searchBar-search">
                                        <input type="text" class="searchBar-input" id="custom-filter"
                                            placeholder="T√¨m ki·∫øm">
                                        <button class="bg-primary r-5 l-5 t-5" type="button" id="btnAddStaff"
                                            onclick="modal_Main.openModal('createGroupModal');">
                                            <span>Th√™m</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="tab-header">
                                    <button class="tab-btn active" data-tab="employees-tab">Nh√¢n vi√™n</button>
                                    <button class="tab-btn" data-tab="groups-tab">Nh√≥m</button>
                                </div>
                                <div id="tab-content">
                                    <div id="employees-tab" class="tab-pane active">
                                        <div id="employee-container">
                                            <div id="employee-list" class="employee-list"></div>
                                        </div>
                                    </div>
                                    <div id="groups-tab" class="tab-pane">
                                        <div id="resultGroup" class="resultGroup" style="margin-top: 10px;"></div>
                                    </div>
                                </div>
                            </div>
                            <!--ƒêo·∫°n chat b√™n tr√°i-->
                            <div id="rightPane" class="cv-panel pane"
                                style=" height: 100%; display: flex; flex-direction: column; margin-top: 30px; padding: 20px; transition: all 0.3s ease;">
                                <div class="content-box" style="flex: 1; display: flex; flex-direction: column;">
                                    <h3 class="content-box-header bg-blue text-left" style="margin: 0;">
                                        <div class="chat-author"
                                            style="display: flex; align-items: center; justify-content: space-between;">

                                            <!-- B√™n tr√°i: avatar + t√™n -->
                                            <div style="display: flex; align-items: center;">
                                                <img id="chat-user-avatar" width="36"
                                                    src="../../../assets/image-resources/gravatar.jpg" alt=""
                                                    style="margin-right: 10px;">
                                                <h1 id="chat-user-name" class="white-color"
                                                    style="font-size: 16px; margin: 0;">T√äN NG∆Ø·ªúI NH·∫¨N TIN NH·∫ÆN</h1>
                                               <button id="btn-update-group" style="margin-left: 20px; height: 50px; width: 50px; color: #88f;" onclick="modal_Main.updateGroup()">
                                                <i class="fa-regular fa-pen-fancy"></i>
                                               </button>
                                            </button>

                                            </div>

                                            <!-- B√™n ph·∫£i: n√∫t d·∫•u + -->
                                            <!-- <button id="btn-add-user" class="btn bg-primary"
                                                style="margin-right: 10px; color: #fff; display: none;"
                                                onclick="modal_Main.openModal('addGroupModal')">
                                                <i class="glyph-icon icon-plus"></i>
                                            </button> -->
                                            <!-- N√∫t toggle user info panel -->
                                            <button id="toggle-user-info-btn" class="btn bg-light"
                                                style="position: absolute; top: 20px; right: 20px; z-index: 1000;"
                                                onclick="toggleUserInfoPanel()">
                                                <i class="fa-solid fa-info"></i>
                                            </button>

                                        </div>
                                    </h3>

                                    <div class="content-box-wrapper"
                                        style="flex: 1; flex-direction: column; overflow: hidden;">
                                        <!-- Chat content scroll -->
                                        <div class="scrollable-content" style="flex: 1;">
                                            <ul class="chat-box">
                                                <li class="chat-message incoming">

                                                </li>
                                                <!-- N·ªôi dung tin nh·∫Øn -->
                                            </ul>
                                            <div id="chat-loading"
                                                style="text-align: center; padding: 10px; display: none;">
                                                <span>‚è≥ ƒêang t·∫£i tin nh·∫Øn...</span>
                                            </div>
                                        </div>
                                        <!-- N√∫t ƒë√≠nh k√®m file -->
                                        <input type="file" id="chat-attachment" style="display: block; margin-top: 5%; "
                                            multiple />
                                        <!-- Input g·ª≠i tin nh·∫Øn -->
                                        <div class="button-pane pad10A"
                                            style="border-top: 1px solid #ddd; background: #fff;">
                                            <div class="input-group">
                                                <!--  Box preview tr·∫£ l·ªùi -->
                                                <div id="reply-preview-box"
                                                    style="display: none; width: 100%; background: #eef; padding: 6px 12px; border-left: 4px solid #88f; margin-bottom: 8px; border-radius: 4px; position: relative;">
                                                    <div class="replying-to">
                                                        <!-- N·ªôi dung preview s·∫Ω ƒë∆∞·ª£c JS ƒë·∫©y v√†o -->
                                                    </div>
                                                    <span class="cancel-reply" onclick="modal_Main.cancelReply()"
                                                        title="Hu·ª∑ tr·∫£ l·ªùi"
                                                        style="position: absolute; right: 10px; top: 6px; cursor: pointer; color: red; font-weight: bold;">√ó</span>
                                                </div>

                                                <!-- Input tin nh·∫Øn -->
                                                <input type="text" placeholder="N·ªôi dung tin nh·∫Øn" class="form-control"
                                                    id="chat-input">

                                                <div class="input-group-btn">
                                                    <!-- N√∫t g·ª≠i tin nh·∫Øn -->
                                                    <button type="button" class="btn btn-primary"
                                                        onclick="modal_Main.sendMessage()">
                                                        <i class="glyph-icon icon-send"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- C·ªôt ph·∫£i: Th√¥ng tin ng∆∞·ªùi d√πng -->
                            <div id="user-info-panel" class="cv-panel pane">
                                <!-- <h4 class="mb-5" style="text-align: center;">Th√¥ng tin ng∆∞·ªùi d√πng</h4> -->
                                <div id="user-avatar" style="text-align: center;">
                                    <img id="user-avatar-img" src="../../../assets/image-resources/gravatar.jpg"
                                        width="80" class="img-circle" src="./img/anh-avatar-nhom.jpg" />
                                    <p id="user-fullname"><strong>T√™n ng∆∞·ªùi nh·∫≠n tin nh·∫Øn</strong></p>
                                </div>

                                <hr>

                                <div>
                                    <button class="btn btn-sm btn-primary" onclick="modal_Main.selectFile()">üìÅ Xem
                                        li√™n
                                        k·∫øt</button>
                                    <button class="btn btn-sm btn-info" onclick="modal_Main.selectImage()">üñºÔ∏è Xem
                                        ·∫£nh</button>
                                    <button class="btn btn-sm btn-default" onclick="modal_Main.viewProfile()">üë§ H·ªì
                                        s∆°
                                        c√° nh√¢n</button>
                                </div>
                                <div id="group-members" style="margin-top: 20px;">
                                    <button onclick="modal_Main.getListUserByConversation()" id="member-title">
                                        <strong>Th√†nh vi√™n nh√≥m</strong>
                                    </button>
                                    <ul id="member-list">

                                    </ul>
                                </div>

                                <!-- Khung hi·ªÉn th·ªã d·ªØ li·ªáu ƒë·ªông -->
                                <div id="file-image-display-wrapper"
                                    style="max-height: 600px; overflow-y: auto; padding: 20px;">
                                    <div id="file-image-display" style="margin-top: 30px;"></div>
                                </div>

                            </div>
                        </div>
                        <!-- Tab chuy·ªÉn layout -->
                        <div id="mobile-nav" class="mobile-nav">
                            <button onclick="showPane('leftPane')">üìã Danh s√°ch</button>
                            <button onclick="showPane('rightPane')">üí¨ Chat</button>
                            <button onclick="showPane('user-info-panel')">üë§ Th√¥ng tin</button>
                        </div>

                        <!--END MAIN PAGE-->
                        <!--Modal create group-->
                        <div id="createGroupModal" class="modal">
                            <div class="modal-content">
                                <span class="close-btn"
                                    onclick="modal_Main.closeModal('createGroupModal')">&times;</span>
                                <h2>T·∫°o nh√≥m</h2>

                                <input id="groupName" type="text" placeholder="Nh·∫≠p t√™n nh√≥m..." />
                                <input id="searchUser" type="text" placeholder="T√¨m ki·∫øm t√™n nh√¢n vi√™n"
                                    oninput="modal_Main.filterUsers('createGroupModal')" />

                                <div id="userList" class="user-list">
                                    <!-- Users will be rendered here -->
                                </div>
                                <!-- Ch·ªçn ·∫£nh ƒë·∫°i di·ªán -->
                                <div class="form-group" style="margin-top: 5%;">
                                    <label for="groupImage">·∫¢nh nh√≥m (tu·ª≥ ch·ªçn)</label>
                                    <input id="groupImage" type="file" accept="image/*"
                                        onchange="modal_Main.previewImage()" />

                                    <!-- Khung hi·ªÉn th·ªã ·∫£nh -->
                                    <div id="imagePreviewWrapper" class="image-preview-wrapper">
                                        <img id="imagePreview" class="image-preview" src="#" alt="·∫¢nh xem tr∆∞·ªõc"
                                            style="display: none;" />
                                    </div>
                                </div>

                                <div class="footer">
                                    <button onclick="modal_Main.closeModal('createGroupModal')">H·ªßy</button>
                                    <button id="createGroupBtn" onclick="modal_Main.createGroup()">T·∫°o nh√≥m</button>
                                </div>
                            </div>
                        </div>
                        <!--Modal add user to group-->
                        <div id="addGroupModal" class="modal">
                            <div class="modal-content">
                                <span class="close-btn" onclick="modal_Main.closeModal('addGroupModal')">&times;</span>
                                <h2>Th√™m nh√¢n vi√™n v√†o nh√≥m</h2>
                                <input id="searchUser-add" type="text" placeholder="üîç T√¨m ki·∫øm nh√¢n vi√™n"
                                    oninput="modal_Main.filterUsers('addGroupModal')" />

                                <div id="userList-add" class="user-list">
                                    <!-- Users will be rendered here -->
                                </div>

                                <div class="footer">
                                    <button onclick="modal_Main.closeModal('addGroupModal')">H·ªßy</button>
                                    <button id="addGroupBtn" onclick="modal_Main.addUserToGroup()">Th√™m nh√¢n
                                        vi√™n</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button id="close-gallery">‚ùå ƒê√≥ng ·∫£nh</button>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="chat.js" defer></script>
</body>

</html>